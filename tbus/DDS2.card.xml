<?xml version="1.0" encoding="utf-8"?>
<Card name="DDS2">

All 16 addresses are reserved by this card.

   DDS_clock = 500MHz
   update_time = 500*4/DDS_clock = 4us

  <BooleanParameter name="freqmode" default="false" />  0 = jump; 1=sweep
  <IntegerParameter name="freq" defaultvalue="0" min="-2000000000" max="2000000000" />
     if freqmode=jump then freq_bits = (Output_freq / DDS_clock) * 2^32
	 if freqmode=sweep then freq_bits = (dfdt/DDS_clock) * update_time * 2^48
	 
  <BooleanParameter name="FreqSweepRateX256,FX256" default="false" />  0 = x0; 1=x256
  
  <BooleanParameter name="phasemode" default="false" />
  <IntegerParameter name="phase" defaultvalue="0" min="-32768" max="32767"  OnUnderflow="allow" OnOverflow="allow" abs="off" />

  <BooleanParameter name="amplmode" default="false" />
  <IntegerParameter name="ampl" defaultvalue="0" min="-32768" max="32767"  OnUnderflow="clip" OnOverflow="clip" abs="off" />
  
  <IntegerParameter name="address,addr" defaultvalue="0" min="0" max="511"  OnUnderflow="clip" OnOverflow="allow" abs="on" />

  <BooleanParameter name="enable1" default="false" />  Enable/disable the output amplifier
  <BooleanParameter name="enable2" default="false" />

  <IntegerParameter name="Tick" defaultvalue="0" min="0" max="15"  OnUnderflow="clip" OnOverflow="clip" abs="off" />
  <IntegerParameter name="Reset" defaultvalue="0" min="0" max="15"  OnUnderflow="clip" OnOverflow="clip" abs="off" />
    0..12:TBus channel; 13: '0'; 14,15:'1'.

  <IntegerParameter name="DDS clock multiplier, DDS_factor" defaultvalue="5" min="4" max="20"  OnUnderflow="clip" OnOverflow="clip" abs="off" />  
	
  <BooleanParameter name="mode" default="false" /> 0=manual, 1=bus
  <IntegerParameter name="manualaddr,manual" defaultvalue="0" min="0" max="511"  OnUnderflow="clip" OnOverflow="clip" abs="off" />  




  <Register name="SetMem_ch1" PreferedMethod="Standard" DefaultDuration="25ns">
    <BusPattern address="+0" direction="w" pattern="freqmode, freq[30],freq[29],freq[28], freq[27],freq[26],freq[25],freq[24]" />
    <BusPattern address="+1" direction="w" pattern="freq[23],freq[22],freq[21],freq[20], freq[19],freq[18],freq[17],freq[16]" />
    <BusPattern address="+2" direction="w" pattern="freq[15],freq[14],freq[13],freq[12], freq[11],freq[10],freq[9],freq[8]" />
    <BusPattern address="+3" direction="w" pattern="freq[7],freq[6],freq[5],freq[4], freq[3],freq[2],freq[1],freq[0]" />
    <BusPattern address="+4" direction="w" pattern="phasemode, phase[14],phase[13],phase[12],phase[11],phase[10],phase[9],phase[8]" />
    <BusPattern address="+5" direction="w" pattern="phase[7],phase[6],phase[5],phase[4],phase[3],phase[2],phase[1],phase[0]" />
    <BusPattern address="+6" direction="w" pattern="amplmode, ampl[14],ampl[13],ampl[12],ampl[11],ampl[10],ampl[9],ampl[8]" />
    <BusPattern address="+7" direction="w" pattern="ampl[7],ampl[6],ampl[5],ampl[4], ampl[3],ampl[2],ampl[1],ampl[0]" />
    <BusPattern address="+8" direction="w" pattern="0,0,0,0, 0,0,addr[8],addr[7]" />
    <BusPattern address="+9" direction="w" pattern="addr[6],addr[5],addr[4],addr[3],addr[2],addr[1],addr[0],0" />
  </Register>

  <Register name="SetMem_ch2" PreferedMethod="Standard" DefaultDuration="25ns">
    <BusPattern address="+0" direction="w" pattern="freqmode, freq[30],freq[29],freq[28], freq[27],freq[26],freq[25],freq[24]" />
    <BusPattern address="+1" direction="w" pattern="freq[23],freq[22],freq[21],freq[20], freq[19],freq[18],freq[17],freq[16]" />
    <BusPattern address="+2" direction="w" pattern="freq[15],freq[14],freq[13],freq[12], freq[11],freq[10],freq[9],freq[8]" />
    <BusPattern address="+3" direction="w" pattern="freq[7],freq[6],freq[5],freq[4], freq[3],freq[2],freq[1],freq[0]" />
    <BusPattern address="+4" direction="w" pattern="phasemode, phase[14],phase[13],phase[12],phase[11],phase[10],phase[9],phase[8]" />
    <BusPattern address="+5" direction="w" pattern="phase[7],phase[6],phase[5],phase[4],phase[3],phase[2],phase[1],phase[0]" />
    <BusPattern address="+6" direction="w" pattern="amplmode, ampl[14],ampl[13],ampl[12],ampl[11],ampl[10],ampl[9],ampl[8]" />
    <BusPattern address="+7" direction="w" pattern="ampl[7],ampl[6],ampl[5],ampl[4], ampl[3],ampl[2],ampl[1],ampl[0]" />
    <BusPattern address="+8" direction="w" pattern="0,0,0,0, 0,0,addr[8],addr[7]" />
    <BusPattern address="+9" direction="w" pattern="addr[6],addr[5],addr[4],addr[3],addr[2],addr[1],addr[0],1" />
  </Register>

  <Register name="SetSettings" PreferedMethod="Standard" DefaultDuration="25ns">
    <BusPattern address="+11" direction="w" pattern="Tick[3],Tick[2],Tick[1],Tick[0], Reset[3],Reset[2],Reset[1],Reset[0]" />
    <BusPattern address="+10" direction="w" pattern="0,FX256,0,0, 0,0,Enable2,Enable1"  />
    <BusPattern address="+12" direction="w" pattern="mode,0,0,0, 0,0,0,Manual[8]"  />
    <BusPattern address="+13" direction="w" pattern="manual[7],manual[6],manual[5],manual[4], manual[3],manual[2],manual[1],manual[0]"  />	
  </Register>
  
  <Register name="Initialize" PreferedMethod="Standard" DefaultDuration="25ns">
    <BusPattern address="+14" direction="w" pattern="0,0,0,DDS_factor[4], DDS_factor[3],DDS_factor[2],DDS_factor[1],DDS_factor[0]" />
    <BusPattern address="+15" direction="w" pattern="0,0,0,0, 0,0,0,0"  /> Any write to this register will cause a reinitialization.
  </Register>
 
</Card>